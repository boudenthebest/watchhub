<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WatchHub</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header-bar">
        <!-- Logo et texte WatchHub -->
        <div class="logo-section">
            <img src="https://cdn.discordapp.com/attachments/1295360411234992209/1316374991972995112/file-9FweXAU86es6meFLkHF2fx-removebg-preview.png?ex=675ad13f&is=67597fbf&hm=98653b8bb0dcaa32849186c0e09de9c1d28580382d182778490ec0507916d441&" alt="Logo" class="small-logo">
            <span class="brand-name">WatchHub</span>
        </div>

        <!-- Boutons alignés à droite -->
        <div class="buttons-section">
            <button class="subscribe-btn">S'abonner</button>
            <button class="create-account-btn" onclick="window.location.href='create-account.html'">Create Account</button>
        </div>
    </header>
</body>
      <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <!-- زر تسجيل الدخول -->
  <div id="g_id_onload"
       data-client_id="YOUR_GOOGLE_CLIENT_ID"
       data-context="use"
       data-callback="handleCredentialResponse"
       data-auto_prompt="false">
  </div>
  <div class="g_id_signin" data-type="standard"></div>

  <script>
    // استدعاء البيانات بعد تسجيل الدخول
    function handleCredentialResponse(response) {
      console.log("Encoded JWT ID token: " + response.credential);

      // إرسال الـ token للـ Backend للتحقق
      fetch('/auth/google', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ token: response.credential }),
      })
      .then(response => response.json())
      .then(data => {
        console.log("User Data:", data);
        alert(`Welcome, ${data.name}`);
      })
      .catch(error => {
        console.error("Error:", error);
      });
    }

    // تشغيل النافذة المنبثقة عند الضغط على الزر
    function displayGooglePopup() {
      google.accounts.id.prompt();
    }
  </script>

  <button onclick="displayGooglePopup()">Login with Google</button>
</body>
</html>
